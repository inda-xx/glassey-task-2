name: Issue Opened
run-name: Detect when issue is opened and list files

on:
  issues:
    types: [opened]

jobs:
  List-Java-Files:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: List all Java files
      run: |
        find . -name "*.java" > java_files.txt
    
    - name: Update issue
      env:
        API_TOKEN: ${{ secrets.API_TOKEN }}
      run: |
        curl -X PATCH \
        -H "Authorization: token $API_TOKEN" \
        -H "Accept: application/vnd.github.v3+json" \
        https://api.github.com/repos/$GITHUB_REPOSITORY/issues/${{ github.event.issue.number }} \
        -d '{
        "title": "New issue title",
        "body": "New issue body"
        }'
